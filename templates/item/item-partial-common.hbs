{{ log 'item-partial-common' this }}
<div class="description">
    {{item.system.description}}
    {{#if item.system.NOTES}}
        <div class="item-notes-editable-content"><b>Notes:</b> {{{item.system.NOTES}}}</div>
    {{/if}}
</div>

<div class="form-group">
    <label>NAME</label>
    <input type="text" name="system.NAME" value="{{system.NAME}}" data-dtype="text" />
</div>

<div class="form-group">
    <label>ALIAS</label>
    <input type="text" name="system.ALIAS" value="{{system.ALIAS}}" data-dtype="text" />
</div>

{{#unless editOptions.hideLEVELS}}
    <div class="form-group">
        <label>LEVELS</label>
        <input {{#if (isdefined system.PDLEVELS)}}disabled{{/if}} type="text" name="system.LEVELS" value="{{system.LEVELS}}" data-dtype="Number" />
    </div>

    <div class="form-group">
        {{#if system.QUANTITY}}
            <label>QUANTITY</label>
            {{!-- <input type="text" name="system.QUANTITY" value="{{system.QUANTITY}}" data-dtype="Number" /> --}}
            {{numberInput system.QUANTITY name="system.QUANTITY"}}
        {{/if}}
    </div>
{{/unless}}

{{#if (isdefined system.INPUT)}}
    <div class="form-group {{#if (itemHeroValidationForProperty this.item "INPUT")}}validation{{/if}}" 
        title="{{itemHeroValidationForProperty this.item "INPUT"}}"
        >
        <label>
            INPUT
            {{#if (itemHeroValidationForProperty this.item "INPUT")}}
                <i class="fa-regular fa-circle-exclamation"></i>
            {{/if}}
        </label>
        {{#if editOptions.choicesInput}}
            <select name="system.INPUT" data-dtype="text">
                {{selectOptions editOptions.choicesInput selected=system.INPUT valueAttr="INPUT" labelAttr="INPUT"}}
            </select>
        {{else}}
            <input type="text" name="system.INPUT" value="{{system.INPUT}}" data-dtype="text" />
        {{/if}}
    </div>
{{/if}}

{{#if (isdefined system.OPTION)}}
    {{#if editOptions.choices}}
        <div class="form-group">
            <label>OPTION</label>
            <select name="system.OPTION" data-dtype="text">
                {{selectOptions editOptions.choices selected=system.OPTION valueAttr="OPTION" labelAttr="OPTION_ALIAS"}}
            </select>
        </div>

        <div class="form-group">
            <label>OPTIONID</label>
            <input disabled type="text" value="{{system.OPTIONID}}" data-dtype="text" />
        </div>

        <div class="form-group {{#if (itemHeroValidationForProperty this.item "OPTION_ALIAS")}}validation{{/if}}" 
            title="{{itemHeroValidationForProperty this.item "OPTION_ALIAS"}}"
            >
            <label>
                OPTION_ALIAS
                {{#if (itemHeroValidationForProperty this.item "OPTION_ALIAS")}}
                    <i class="fa-regular fa-circle-exclamation"></i>
                {{/if}}
            </label>
            <input {{#unless editOptions.editableOption_ALIAS}}disabled{{/unless}} name="system.OPTION_ALIAS" type="text" value="{{system.OPTION_ALIAS}}" data-dtype="text" />
        </div>

    {{else}}
        <div class="form-group">
            <label>OPTION</label>
            <input type="text" name="system.OPTION" value="{{system.OPTION}}" data-dtype="text" />
        </div>

        {{#if (isdefined system.OPTIONID)}}
        <div class="form-group">
            <label>OPTIONID</label>
            <input type="text" name="system.OPTIONID" value="{{system.OPTIONID}}" data-dtype="text" />
        </div>
        {{/if}}

        {{#if (isdefined system.OPTION_ALIAS)}}
        <div class="form-group">
            <label>
                OPTION_ALIAS
            </label>
            <input type="text" name="system.OPTION_ALIAS" value="{{system.OPTION_ALIAS}}" data-dtype="text" />
        </div>
        {{/if}}

    {{/if}}
{{/if}}

{{! editOptions.showAttacks === true}}
{{#if attacks.length }}
    <div class="form-group {{#if (itemHeroValidationForProperty this.item "AttacksIncluded")}}validation{{/if}}"
        title="{{itemHeroValidationForProperty this.item "AttacksIncluded"}}">
        <label>
            Attacks Included:
            {{#if (itemHeroValidationForProperty this.item "AttacksIncluded")}}
                <i class="fa-regular fa-circle-exclamation"></i>
            {{/if}}
        </label>
        <div class="form-fields csl-attack-list">
            <ul>
                {{#each attacks }}
                    <li><input type="checkbox" name="attacks.{{this.id}}" {{checked this.checked}} data-dtype="Boolean"/>
                    <span title="{{this.title}}">
                        {{this.name}}
                    </span>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
{{/if}}

{{#if penaltyChoices}}
    <div class="form-group">
        <label>PENALTY</label>
        <div class="form-fields">
            {{item.pslPenaltyType}}
        </div>
    </div>
{{/if}}

{{! COMBAT SKILL LEVELS}}
{{#if item.system.csl}}
 <div class="form-group">
    <label>SKILL LEVELS</label>
    <div class="form-fields">
        <ol>
            {{#each item.system.csl}}
            <li>
                {{!-- {{ radioBoxes this.name @root/cslChoices checked=this.value localize=true}} --}}
                {{!-- <input type="text" name="system.csl.{{@index}}" value="{{this}}"> --}}

                <select name="system.csl.{{@index}}">
                    {{selectOptions @root/item.cslChoices selected=this}}
                </select>
                
            </li>
            {{/each}}
        </ol>

    </div>
</div>
{{/if}}


{{#if (isdefined system.TYPE)}}
<div class="form-group">
    <label>TYPE</label>
    <input type="text" name="system.TYPE" value="{{system.TYPE}}" data-dtype="text" />
</div>
{{/if}}



{{!Martial Maneuver--}}
{{#if (isdefined system.USEWEAPON)}}
<div class="form-group">
    <label>USEWEAPON</label>
    <input type="checkbox" name="system.USEWEAPON" {{checked system.USEWEAPON}} data-dtype="Boolean"/>
</div>
{{/if}}

{{!-- FORCEFIELD --}}
{{#if (isdefined system.PDLEVELS)}}
<div class="form-group">
    <label>PDLEVELS</label>
    <input type="text" name="system.PDLEVELS" value="{{system.PDLEVELS}}" data-dtype="Number" />
</div>
{{/if}}
{{#if (isdefined system.EDLEVELS)}}
<div class="form-group">
    <label>EDLEVELS</label>
    <input type="text" name="system.EDLEVELS" value="{{system.EDLEVELS}}" data-dtype="Number" />
</div>
{{/if}}
{{#if (isdefined system.MDLEVELS)}}
<div class="form-group">
    <label>MDLEVELS</label>
    <input type="text" name="system.MDLEVELS" value="{{system.MDLEVELS}}" data-dtype="Number" />
</div>
{{/if}}
{{#if (isdefined system.POWDLEVELS)}}
<div class="form-group">
    <label>POWDLEVELS</label>
    <input type="text" name="system.POWDLEVELS" value="{{system.POWDLEVELS}}" data-dtype="Number" />
</div>
{{/if}}

{{!-- FORCEWALL/Barrier --}}
{{#if (isdefined system.LENGTHLEVELS)}}
<div class="form-group">
    <label>LENGTHLEVELS</label>
    <input type="text" name="system.LENGTHLEVELS" value="{{system.LENGTHLEVELS}}" data-dtype="Number" />
</div>
{{/if}}
{{#if (isdefined system.HEIGHTLEVELS)}}
<div class="form-group">
    <label>HEIGHTLEVELS</label>
    <input type="text" name="system.HEIGHTLEVELS" value="{{system.HEIGHTLEVELS}}" data-dtype="Number" />
</div>
{{/if}}
{{#if (isdefined system.WIDTHLEVELS)}}
<div class="form-group">
    <label>WIDTHLEVELS</label>
    <input type="text" name="system.WIDTHLEVELS" value="{{system.WIDTHLEVELS}}" data-dtype="Number" />
</div>
{{/if}}
{{#if (isdefined system.BODYLEVELS)}}
<div class="form-group">
    <label>BODYLEVELS</label>
    <input type="text" name="system.BODYLEVELS" value="{{system.BODYLEVELS}}" data-dtype="Number" />
</div>
{{/if}}

{{#if (isdefined system.USESTANDARDEFFECT)}}
<div class="form-group">
    <label>USESTANDARDEFFECT</label>
    <input type="checkbox" name="system.USESTANDARDEFFECT" {{checked system.USESTANDARDEFFECT}} data-dtype="Boolean"/>
</div>
{{/if}}

{{#if (isdefined system.AFFECTS_PRIMARY)}}
<div class="form-group">
    <label>AFFECTS_PRIMARY</label>
    <input type="checkbox" name="system.AFFECTS_PRIMARY" {{checked system.AFFECTS_PRIMARY}} data-dtype="Boolean"/>
</div>
{{/if}}

{{#if (isdefined system.AFFECTS_TOTAL)}}
<div class="form-group">
    <label>AFFECTS_TOTAL</label>
    <input type="checkbox" name="system.AFFECTS_TOTAL" {{checked system.AFFECTS_TOTAL}} data-dtype="Boolean"/>
</div>
{{/if}}

{{#if (isdefined system.USE_END_RESERVE)}}
<div class="form-group">
    <label>USE_END_RESERVE</label>
    <input type="checkbox" name="system.USE_END_RESERVE" {{checked system.USE_END_RESERVE}} data-dtype="Boolean"/>
</div>
{{/if}}


{{#if (isdefined system.CHARACTERISTIC)}}
<div class="form-group">
    <label>CHARACTERISTIC</label>
    <select name="system.CHARACTERISTIC" data-dtype="text">
        {{#if item.actor.system.is5e}}
            {{selectOptions config.skillCharacteristics5e selected=system.CHARACTERISTIC}}
        {{else}}
            {{selectOptions config.skillCharacteristics selected=system.CHARACTERISTIC}}
        {{/if}}
    </select>
</div>
{{/if}}


{{#if (isdefined system.LEVELSONLY)}}
<div class="form-group">
    <label>LEVELSONLY</label>
    <input type="checkbox" name="system.LEVELSONLY" {{checked system.LEVELSONLY}} data-dtype="Boolean"  
    {{#if (or (or system.FAMILIARITY system.EVERYMAN) system.PROFICIENCY)}}disabled{{/if}}/>
</div>
{{/if}}

{{#if (isdefined system.FAMILIARITY)}}
<div class="form-group">
    <label>FAMILIARITY</label>
    <input type="checkbox" name="system.FAMILIARITY" {{checked system.FAMILIARITY}} data-dtype="Boolean" 
    {{#if (or system.LEVELSONLY system.PROFICIENCY)}}disabled{{/if}}/>
</div>
{{/if}}

{{!-- if FAMILIARITY is present then EVERYMAN can be an option --}}
{{#if (isdefined system.FAMILIARITY)}}
<div class="form-group">
    <label>EVERYMAN</label>
    <input type="checkbox" name="system.EVERYMAN" {{checked system.EVERYMAN}} data-dtype="Boolean"  
    {{#if (or system.LEVELSONLY system.PROFICIENCY)}}disabled{{/if}}/>
</div>
{{/if}}

{{#if (isdefined system.PROFICIENCY)}}
<div class="form-group">
    <label>PROFICIENCY</label>
    <input type="checkbox" name="system.PROFICIENCY" {{checked system.PROFICIENCY}} data-dtype="Boolean"  
    {{#if (or system.LEVELSONLY system.FAMILIARITY)}}disabled{{/if}}/>
</div>
{{/if}}

{{#if (isdefined system.NATIVE_TONGUE)}}
<div class="form-group">
    <label>NATIVE TONGUE</label>
    <input type="checkbox" name="system.NATIVE_TONGUE" {{checked system.NATIVE_TONGUE}} data-dtype="Boolean" />
</div>
{{/if}}


{{#if (isdefined system.SFX)}}
<div class="form-group">
    <label>SFX</label>
    <input type="text" name="system.SFX" value="{{system.SFX}}" data-dtype="text" />
</div>
{{/if}}

{{#if system.chargeModifier}}
    <div class="form-group">
        <label>Charges</label>
        <div class="flexrow">
            <input type="text" name="system.numCharges" value="{{system.numCharges}}" data-dtype="Number" />
            <span>/</span>
            <input disabled title="maximum, edit with modifier" type="text" name="system.chargesMax" value="{{system.chargesMax}}" data-dtype="Number" />
        </div>
    </div>

    {{#if system.chargeModifier.CLIPS}}
        <div class="form-group">
            <label>Clips</label>
            <div class="flexrow">
                <input type="text" name="system.clips" value="{{system.clips}}" data-dtype="Number" />
                <span>/</span>
                <input disabled  title="maximum, edit with modifier" type="text" name="system.clipsMax" value="{{system.clipsMax}}" data-dtype="Number" />
            </div>
    </div>
    {{/if}}
{{/if}}

{{#with item}}
    {{#if this.isAblativeDefense}}
        <div class="form-group">
            <label>Ablative Threshold Exceeded</label>
            <input type="text" name="system.ablative" value="{{system.ablative}}" data-dtype="Number" />
        </div>
    {{/if}}
{{/with}}
